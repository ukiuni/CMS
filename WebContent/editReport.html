<!DOCTYPE html>
<html ng-app="myApp">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.13/angular.min.js"></script>
<script src="https://rawgithub.com/angular-ui/ui-sortable/master/src/sortable.js"></script>

<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.10.0/ui-bootstrap-tpls.min.js"></script>
<script src="http://m-e-conroy.github.io/angular-dialog-service/javascripts/dialogs.min.js" type="text/javascript"></script>
<script type="text/javascript" src="scripts/marked.min.js"></script>
<script type="text/javascript" src="scripts/angular-marked.min.js"></script>
<link rel="stylesheet" href="//yandex.st/highlightjs/8.0/styles/github.min.css">
<script src="//yandex.st/highlightjs/8.0/highlight.min.js"></script>
</head>
<body>
	<div id="header" ng-include="'template/header.html'"></div>
	<div ng-controller="controller" style="margin: 10px">
		<div class="row">
			<div class="col-xs-12">
				<div class="form-group">
					<input type="text" ng-model="report.title" class="form-control" style="font-size: 50px; height: 80px; margin: 0;" placeholder="Title">
				</div>
			</div>
		</div>
		<div class="row" style="height: 500px; margin: 0px;">
			<div class="col-xs-6" style="height: 100%; overflow: scroll; border: solid 1px #999; padding: 0; border-radius: 4px 0 0 4px">
				<textarea style="width: 100%; height: 100%; border: 0; margin: 0; border-radius: 4px" ng-model="report.content"></textarea>
			</div>
			<div class="col-xs-6" style="height: 100%; overflow: scroll; border: solid 1px #999; border-radius: 0 4px 4px 0">
				<div marked="report.content" style="border-radius: 4px"></div>
			</div>
		</div>
		<div class="row" style="margin: 10px">
			<div class="col-xs-3 col-xs-offset-9">
				<div class="btn-group" align="right">
					<button type="button" class="btn btn-default" style="width: 150px;" ng-click="doAction()">{{action}}</button>
					<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
						<span class="caret"></span> <span class="sr-only">Toggle Dropdown</span>
					</button>
					<ul class="dropdown-menu" role="menu">
						<li><a href="#" ng-click="changeAction('save')">save</a></li>
						<li><a href="#" ng-click="changeAction('save as draft')">save as draft</a></li>
						<li><a href="#" ng-click="changeAction('save as private')">save as private</a></li>
						<li class="divider"></li>
						<li><a href="#" ng-click="changeAction('delete')">delete</a></li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript">
		var myApp = angular.module('myApp', [ 'ui.sortable', 'ui.bootstrap', 'hc.marked' ]);
		myApp.config([ 'markedProvider', function(markedProvider) {
			markedProvider.setOptions({
				gfm : true,
				tables : true,
				breaks : true,
				highlight : function(code) {
					return hljs.highlightAuto(code).value;
				}
			});
		} ]);
		myApp.controller("controller", [ "$scope", "$http", function($scope, $http) {
			$scope.report = {
				content : ""
			};
			$scope.doAction = function() {
				console.log('doAction = ' + $scope.action);
				$http.post("api/report", $report, function(data) {
					console.log("completed" + data);
				}).error(function(e) {
					console.log("error" + e);
				});

			}
			$scope.changeAction = function(action) {
				$scope.action = action;
			}
			$scope.action = "save";
		} ]);
	</script>
	<div class="row">
		<div id="header" ng-include="'template/header.html'"></div>
	</div>
</body>
</html>